<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FinMatrix</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
  <header class="topbar">
    <h1>Trading & Profit & Loss Generator</h1>
    <p class="subtitle">Upload your Trial Balance, review classifications, and generate statements.</p>
  </header>

  <main class="container">
    <!-- Step 1: Input -->
    <section class="card">
      <h2>1) Load Trial Balance</h2>
      <div class="row">
        <div>
          <label class="file-label">
            <input id="csvFile" type="file" accept=".csv" />
            <span>Upload CSV</span>
          </label>
          <button id="downloadSample" class="ghost">Download sample CSV</button>
        </div>
        <div class="sep">or</div>
        <div>
          <button id="addRow" class="outline">Add Row</button>
          <button id="clearAll" class="danger">Clear All</button>
        </div>
      </div>
      <p class="hint">
        CSV format: <code>Ledger,Debit,Credit</code> (numbers only in Debit/Credit). Example: <code>Sales,,250000</code>
      </p>
      <div class="table-wrap">
        <table id="tbTable">
          <thead>
            <tr>
              <th>#</th>
              <th>Ledger</th>
              <th>Debit</th>
              <th>Credit</th>
              <th>Class</th>
              <th>Sub-Type</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="tbBody">
            <!-- Rows injected by JS -->
          </tbody>
          <tfoot>
            <tr>
              <td></td>
              <td class="right bold">Trial Balance Totals</td>
              <td id="sumDebit" class="right">0.00</td>
              <td id="sumCredit" class="right">0.00</td>
              <td colspan="3" id="tbStatus"></td>
            </tr>
          </tfoot>
        </table>
      </div>
    </section>

    <!-- Step 2: Controls -->
    <section class="card">
      <h2>2) Adjust & Generate</h2>
      <div class="controls">
        <label>
          <span>Closing Stock</span>
          <input id="closingStock" type="number" step="0.01" placeholder="0.00" />
        </label>
        <label>
          <span>Currency</span>
          <input id="currency" type="text" value="â‚¹" />
        </label>
        <button id="generate" class="primary">Generate Statements</button>
        <button id="downloadPdf">Download PDF</button>
      </div>
      <p class="hint">
        Auto-classification uses smart keyword rules. You can override in the table before generating.
      </p>
    </section>

    <!-- Step 3: Output -->
    <section class="grid">
      <article class="card">
        <h2>Trading Account</h2>
        <div id="tradingWrap" class="two-col-statement"></div>
      </article>

      <article class="card">
        <h2>Profit & Loss Account</h2>
        <div id="plWrap" class="two-col-statement"></div>
      </article>
    </section>

    <section class="card">
      <h2>Summary</h2>
      <div id="summary" class="summary"></div>
    </section>
  </main>

  <footer class="footer">
    <small>Built for speed. All calculations run in your browser.</small>
  </footer>

  <script src="app.js"></script>
</body>
</html>
